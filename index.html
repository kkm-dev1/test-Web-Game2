<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>원숭이 족치기 게임</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>🐵</text></svg>">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Fredoka+One&family=Noto+Sans+KR:wght@400;700;900&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
    <div class="game-container">
        <!-- 게임 타이틀 -->
        <div class="game-title">
            <h1><img src="{{ url_for('static', filename='images/monkey.png') }}" alt="🐵" class="title-icon" onerror="this.style.display='none'; this.nextElementSibling.style.display='inline'"><span style="display:none">🐵</span> 원숭이 족치기 게임 <img src="{{ url_for('static', filename='images/monkey.png') }}" alt="🐵" class="title-icon" onerror="this.style.display='none'; this.previousElementSibling.style.display='inline'"><span style="display:none">🐵</span></h1>
            <p class="game-subtitle">원숭이를 때려서 돈을 벌어보세요!</p>
        </div>

        <!-- 헤더 버튼 -->
        <div class="header-buttons">
            <button id="help-btn" class="header-btn" title="도움말"><img src="{{ url_for('static', filename='images/help.png') }}" alt="❓" class="btn-icon" onerror="this.style.display='none'; this.nextElementSibling.style.display='inline'"><span style="display:none">❓</span></button>
            <button id="achievements-btn" class="header-btn" title="업적"><img src="{{ url_for('static', filename='images/trophy.png') }}" alt="🏆" class="btn-icon" onerror="this.style.display='none'; this.nextElementSibling.style.display='inline'"><span style="display:none">🏆</span></button>
            <button id="sound-toggle" class="header-btn sound-on" title="사운드 끄기/켜기"><img src="{{ url_for('static', filename='images/sound-on.png') }}" alt="🔊" class="btn-icon" id="sound-icon" onerror="this.style.display='none'; this.nextElementSibling.style.display='inline'"><span style="display:none">🔊</span></button>
        </div>

        <!-- 게임 헤더 -->
        <header class="game-header">
            <div class="money-display">
                <img src="{{ url_for('static', filename='images/money.png') }}" alt="💰" class="money-icon" onerror="this.style.display='none'; this.nextElementSibling.style.display='inline'"><span style="display:none">💰</span>
                <span id="money">0</span>
            </div>
            <div class="damage-display">
                데미지: <span id="damage">1</span>
            </div>
            <div class="combo-display">
                콤보: <span id="combo">0</span>
            </div>
            <div class="stats-display">
                클릭: <span id="total-clicks">0</span>
            </div>
            <div class="multiplier-display" id="multiplier-display" style="display: none;">
                <span class="multiplier-text"><img src="{{ url_for('static', filename='images/fire.png') }}" alt="🔥" class="inline-icon" onerror="this.style.display='none'; this.nextElementSibling.style.display='inline'"><span style="display:none">🔥</span> 1.5배 보너스! <img src="{{ url_for('static', filename='images/fire.png') }}" alt="🔥" class="inline-icon" onerror="this.style.display='none'; this.previousElementSibling.style.display='inline'"><span style="display:none">🔥</span></span>
                <span id="multiplier-timer">15</span>초
            </div>
        </header>

        <!-- 메인 게임 영역 -->
        <main class="game-main">
            <!-- 원숭이 영역 -->
            <div class="monkey-container">
                <div id="monkey" class="monkey">
                    <div class="monkey-face"><img src="{{ url_for('static', filename='images/monkey.png') }}" alt="🐵" id="monkey-image" onerror="this.style.display='none'; this.nextElementSibling.style.display='inline'"><span style="display:none; font-size:150px;">🐵</span></div>
                    <div class="monkey-expression" id="monkey-expression"></div>
                </div>
                <div id="damage-text" class="damage-text"></div>
                <div class="particles-container" id="particles-container"></div>
            </div>

            <!-- 도구 선택 영역 -->
            <div class="tools-section">
                <h2>도구 선택</h2>
                <div id="tools-list" class="tools-list">
                    <!-- JavaScript로 동적으로 생성 -->
                </div>
            </div>
        </main>

        <!-- 상점 탭 -->
        <aside class="shop-section" id="shop-section">
            <div class="shop-header">
                <h2><img src="{{ url_for('static', filename='images/shop.png') }}" alt="🏪" class="inline-icon" onerror="this.style.display='none'; this.nextElementSibling.style.display='inline'"><span style="display:none">🏪</span> 상점</h2>
                <button id="close-shop" class="close-btn">✕</button>
            </div>
            <div id="shop-items" class="shop-items">
                <!-- JavaScript로 동적으로 생성 -->
            </div>
        </aside>

        <!-- 상점 열기 버튼 -->
        <button id="open-shop" class="shop-btn"><img src="{{ url_for('static', filename='images/shop.png') }}" alt="🏪" class="btn-icon" onerror="this.style.display='none'; this.nextElementSibling.style.display='inline'"><span style="display:none">🏪</span> 상점 열기</button>

        <!-- 획득 돈 표시 -->
        <div id="earned-popup" class="earned-popup"></div>

        <!-- 튜토리얼 모달 -->
        <div class="modal-overlay" id="tutorial-modal">
            <div class="modal-content">
                <div class="modal-header">
                    <h2><img src="{{ url_for('static', filename='images/gamepad.png') }}" alt="🎮" class="inline-icon" onerror="this.style.display='none'; this.nextElementSibling.style.display='inline'"><span style="display:none">🎮</span> 게임 방법</h2>
                    <button class="modal-close" id="close-tutorial">✕</button>
                </div>
                <div class="modal-body">
                    <div class="tutorial-item">
                        <h3><img src="{{ url_for('static', filename='images/monkey.png') }}" alt="🐵" class="inline-icon" onerror="this.style.display='none'; this.nextElementSibling.style.display='inline'"><span style="display:none">🐵</span> 기본 플레이</h3>
                        <p>화면의 원숭이를 클릭하여 돈을 벌 수 있습니다.</p>
                    </div>
                    <div class="tutorial-item">
                        <h3><img src="{{ url_for('static', filename='images/tool.png') }}" alt="🛠️" class="inline-icon" onerror="this.style.display='none'; this.nextElementSibling.style.display='inline'"><span style="display:none">🛠️</span> 도구 업그레이드</h3>
                        <p>상점에서 더 강력한 도구를 구매하면 더 많은 데미지를 줄 수 있습니다.</p>
                    </div>
                    <div class="tutorial-item">
                        <h3><img src="{{ url_for('static', filename='images/fire.png') }}" alt="🔥" class="inline-icon" onerror="this.style.display='none'; this.nextElementSibling.style.display='inline'"><span style="display:none">🔥</span> 콤보 시스템</h3>
                        <p>3초 이내에 20번 연속 클릭하면 15초 동안 1.5배 보너스를 받습니다!</p>
                    </div>
                    <div class="tutorial-item">
                        <h3><img src="{{ url_for('static', filename='images/save.png') }}" alt="💾" class="inline-icon" onerror="this.style.display='none'; this.nextElementSibling.style.display='inline'"><span style="display:none">💾</span> 게임 저장</h3>
                        <p>게임 진행 상황은 자동으로 저장됩니다. 페이지를 새로고침해도 이어서 플레이할 수 있습니다.</p>
                    </div>
                </div>
                <div class="modal-footer">
                    <button class="modal-btn" id="start-game">게임 시작!</button>
                </div>
            </div>
        </div>

        <!-- 업적 모달 -->
        <div class="modal-overlay" id="achievements-modal" style="display: none;">
            <div class="modal-content">
                <div class="modal-header">
                    <h2><img src="{{ url_for('static', filename='images/trophy.png') }}" alt="🏆" class="inline-icon" onerror="this.style.display='none'; this.nextElementSibling.style.display='inline'"><span style="display:none">🏆</span> 업적</h2>
                    <button class="modal-close" id="close-achievements">✕</button>
                </div>
                <div class="modal-body">
                    <div id="achievements-list" class="achievements-list">
                        <!-- JavaScript로 동적으로 생성 -->
                    </div>
                </div>
            </div>
        </div>

        <!-- 업적 알림 -->
        <div id="achievement-popup" class="achievement-popup"></div>
    </div>

    <script src="{{ url_for('static', filename='script.js') }}"></script>
</body>
</html>

